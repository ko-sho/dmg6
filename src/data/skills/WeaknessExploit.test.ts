import { weaknessExploit } from './WeaknessExploit';
import { describe, it, expect } from 'vitest';

describe('weaknessExploit スキル定義', () => {
  it('全体構造・レベル・パラメータが不変で正しい', () => {
    expect(weaknessExploit.category).toBe('armor');
    expect(weaknessExploit.name).toBe('弱点特攻');
    // レベルごとのパラメータ
    const expected = [
      {
        level: 1,
        skillBonuses: [
          {
            criticalRateBonus: 5, // 0.05 → 5
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["normal"],
            description: '肉質45以上の部位（通常）: 会心率+5%',
          },
          {
            criticalRateBonus: 8, // 0.08 → 8
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["wounded", "exposed"],
            description: '肉質45以上の部位（傷/露出）: 会心率+8%',
          },
        ],
      },
      {
        level: 2,
        skillBonuses: [
          {
            criticalRateBonus: 10, // 0.1 → 10
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["normal"],
            description: '肉質45以上の部位（通常）: 会心率+10%',
          },
          {
            criticalRateBonus: 15, // 0.15 → 15
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["wounded", "exposed"],
            description: '肉質45以上の部位（傷/露出）: 会心率+15%',
          },
        ],
      },
      {
        level: 3,
        skillBonuses: [
          {
            criticalRateBonus: 15, // 0.15 → 15
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["normal"],
            description: '肉質45以上の部位（通常）: 会心率+15%',
          },
          {
            criticalRateBonus: 25, // 0.25 → 25
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["wounded", "exposed"],
            description: '肉質45以上の部位（傷/露出）: 会心率+25%',
          },
        ],
      },
      {
        level: 4,
        skillBonuses: [
          {
            criticalRateBonus: 20, // 0.2 → 20
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["normal"],
            description: '肉質45以上の部位（通常）: 会心率+20%',
          },
          {
            criticalRateBonus: 35, // 0.35 → 35
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["wounded", "exposed"],
            description: '肉質45以上の部位（傷/露出）: 会心率+35%',
          },
        ],
      },
      {
        level: 5,
        skillBonuses: [
          {
            criticalRateBonus: 30, // 0.3 → 30
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["normal"],
            description: '肉質45以上の部位（通常）: 会心率+30%',
          },
          {
            criticalRateBonus: 50, // 0.5 → 50
            minHitZone: 45,
            maxHitZone: 100,
            applicableStates: ["wounded", "exposed"],
            description: '肉質45以上の部位（傷/露出）: 会心率+50%',
          },
        ],
      },
    ];
    // レベル数
    expect(weaknessExploit.levels.length).toBe(expected.length);
    // 各レベルのパラメータ
    for (let i = 0; i < expected.length; i++) {
      expect(weaknessExploit.levels[i].level).toBe(expected[i].level);
      expect(weaknessExploit.levels[i].skillBonuses).toEqual(expected[i].skillBonuses);
    }
  });
});
